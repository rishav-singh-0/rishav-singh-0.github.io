<!DOCTYPE html>
<html lang="en">
    <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<link rel="stylesheet" href="style.css">
		<link rel="shortcut icon" type="image/x-icon" href="favicon.png">
		<link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Open+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
		<script src="https://kit.fontawesome.com/93866eaaa9.js" crossorigin="anonymous"></script>
		<title>Rishav's Blog</title>
	</head>
		<body class="dark-mode">

		<nav class="menu">
			<div class="nav-left">
				<ul>
					<li><a href="index.html"><img class="logo" src="favicon.png" alt=""><span class="sitename">rishav's blog</span></a></li>
				</ul>
			</div>
			<div class="nav-right">
				<ul>
					<li style="padding: 9px"><a id="darkmodetoggle" class="fas fa-moon" onclick="switchTheme()"></a></li>
					<li><a href="mailto:rishav.zero@pm.me">contact</a></li>
					<!-- <li><a href="https://www.youtube.com/channel/UCeql5HBmcs8d0OFT30erYkw">youtube</a></li> -->
					<li><a href="https://github.com/rishav-singh-0">github</a></li>
					<li><a href="https://twitter.com/RishavSingh0">twitter</a></li>
					<li><a href="https://www.linkedin.com/in/rishav-singh-0/">linkedin</a></li>
				</ul>
			</div>
		</nav>

		<article>
<h1 id="Linux%20Containers">Linux Containers</h1>

<p>We will use lxd (LX Demon) and lxc (Linux Container) for creating and managing our Linux Containers</p>

<h2 id="Installation">Installation</h2>

<p>On arch linux
<code>
sudo pacman -S lxc lxd
</code></p>

<h2 id="Setup">Setup</h2>

<h3 id="First%20of%20all%20we%20need%20to%20enable%20lxd%20and%20lxc%20service">First of all we need to enable lxd and lxc service</h3>

<p>On systemd
<code>
sudo systemctl enable lxd.service lxd.socket lxc.service
</code></p>

<p>Enable the control groups PAM module by modifying <code>&#47;etc&#47;pam.d&#47;system-login</code> to additionally contain the following line:
<code>
session    optional   pam_cgfs.so -c freezer,memory,name=systemd,unified
</code></p>

<p>Secondly, modify <code>&#47;etc&#47;lxc&#47;default.conf</code> to contain the following lines:
<code>
lxc.idmap = u 0 100000 65536
lxc.idmap = g 0 100000 65536
</code></p>

<p>Finally, create both &#47;etc&#47;subuid and &#47;etc&#47;subgid to contain the mapping to the containerized uid&#47;gid pairs for each user who shall be able to run the containers. The example below is simply for the root user (and systemd system unit):</p>

<p>Add folling to <code>&#47;etc&#47;subuid</code>
<code>
root:100000:65536
</code></p>

<p>Add following to <code>&#47;etc&#47;subgid</code>
<code>
root:100000:65536
</code></p>

<h2 id="GUI%20Setup">GUI Setup</h2>
</article>

<footer id="footnote-definition">
    <p>Creaed by <a href="https://github.com/rishav-singh-0/">Rishav Singh</a> by slightly modified version of <a href="https://www.romanzolotarev.com/ssg.html">ssg6</a>
</footer>
<script>
// Get the theme toggle input
const currentTheme = localStorage.getItem("theme");// If the current local storage item can be found

// Function that will switch the theme based on the if the theme toggle is checked or not
function switchTheme() {
  if (document.documentElement.getAttribute("data-theme") === "dark") {
    document.documentElement.setAttribute("data-theme", "light");
    // Set the user's theme preference to dark
    localStorage.setItem("theme", "light");
  } else {
    document.documentElement.setAttribute("data-theme", "dark");
    // Set the user's theme preference to light
    localStorage.setItem("theme", "dark");
  }
}

// Get the current theme from local storage
if (currentTheme) {
        // Set the body data-theme attribute to match the local storage item
        document.documentElement.setAttribute("data-theme", currentTheme);
        if (currentTheme === "dark") {
                document.documentElement.setAttribute("data-theme", "dark");
        }
}
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        console.log('user prefers dark scheme, going dark');
        document.documentElement.setAttribute("data-theme", "dark");
        }
</script>
</body>
</html>
